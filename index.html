<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ЗА РАМКИ — студия дизайна интерьера</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>

<header class="topbar">
  <div class="topbar-inner">
    <div class="brand">
      <b>ЗА РАМКИ</b>
      <small>studio</small>
    </div>

    <nav class="nav">
      <a href="#portfolio">Портфолио</a>
      <a href="#services">Услуги</a>
      <a href="#team">Команда</a>
      <a href="#reviews">Отзывы</a>
    </nav>

    <div class="topbar-cta">
      <a class="btn" href="#forms">Консультация</a>
      <a class="btn primary" href="#forms">Заказать проект</a>
    </div>
  </div>
</header>

<section class="hero" id="top">
  <div class="container">
    <div class="hero-suptitle">ДИЗАЙН-СТУДИЯ</div><h1 class="hero-title">ЗА РАМКИ</h1>
    
    <div class="hero-actions">
      <a class="btn" href="#forms">Консультация</a>
      <a class="btn primary" href="#forms">Заказать проект</a>
    </div>
  </div>
</section>

<section class="section" id="portfolio">
  <div class="container">
    <h2 class="section-title">Портфолио</h2>
    <p class="section-sub">Галерея проектов. Фильтрация по тегам. Переход на страницу проекта.</p>

    <div class="filters" id="tagFilters"></div>
    <div class="grid" id="projectsGrid"></div>

    <div class="more-row">
      <button class="btn" id="btnMore" type="button">Показать ещё</button>
    </div>
  </div>
</section>

<section class="section" id="services">
  <div class="container">
    <h2 class="section-title">Услуги</h2>
    <p class="section-sub">
      Три формата работы: полный проект, авторский надзор и дистанционный проект.
    </p>

    <div class="grid">

      <!-- Авторский надзор -->
      <div class="panel">
        <div style="display:flex; flex-direction:column; gap:10px;">
          <strong>Авторский надзор</strong>
          <div style="color:var(--muted);">
            Сопровождение реализации и контроль соответствия проекту. Отдельная услуга.
          </div>
          <div class="meta" style="flex-direction:column; gap:6px;">
            <span>• Коммуникация с подрядчиками</span>
            <span>• Проверка решений на объекте</span>
            <span>• Корректировки по месту</span>
            <span>• Контроль соответствия проекту</span>
          </div>
          <a class="btn" href="#forms" style="margin-top:6px;">Запросить надзор</a>
        </div>
      </div>

      <!-- Полный проект -->
      <div class="panel">
        <div style="display:flex; flex-direction:column; gap:10px;">
          <strong>Полный дизайн-проект</strong>
          <div style="color:var(--muted);">
            Проектирование интерьера под реализацию: планировки, концепция, документация и спецификации.
          </div>
          <div class="meta" style="flex-direction:column; gap:6px;">
            <span>• Бриф и диагностика</span>
            <span>• Планировочные решения</span>
            <span>• Концепция и визуальный язык</span>
            <span>• Рабочая документация</span>
          </div>
          <a class="btn primary" href="#forms" style="margin-top:6px;">Заказать проект</a>
        </div>
      </div>

      <!-- Дистанционный -->
      <div class="panel">
        <div style="display:flex; flex-direction:column; gap:10px;">
          <strong>Дистанционный проект</strong>
          <div style="color:var(--muted);">
            Проектирование онлайн: всё необходимое для реализации без выездов.
          </div>
          <div class="meta" style="flex-direction:column; gap:6px;">
            <span>• Онлайн-бриф и исходные данные</span>
            <span>• Планировка и концепция</span>
            <span>• Чертежи и спецификации</span>
            <span>• Рекомендации по закупке</span>
          </div>
          <a class="btn" href="#forms" style="margin-top:6px;">Заказать дистанционно</a>
        </div>
      </div>

    </div>
  </div>
</section>

<section class="section" id="stages">
  <div class="container">
    <h2 class="section-title">Этапы работы</h2>
    <p class="section-sub">
      Работаем системно: от анализа задачи до реализации проекта.
    </p>

    <div class="panel">
      <div style="display:flex; flex-direction:column; gap:16px;">

        <div>
          <strong>1) Бриф и диагностика</strong><br>
          Фиксируем задачу, бюджет, сроки и ограничения объекта. 
          Анализируем исходные данные и формируем техническое задание.
        </div>

        <div>
          <strong>2) Планировочные решения</strong><br>
          Разрабатываем варианты планировки и сценарии использования пространства. 
          Утверждаем функциональную схему.
        </div>

        <div>
          <strong>3) Концепция и визуальный язык</strong><br>
          Определяем материалы, цвет, свет и характер интерьера. 
          Формируем архитектурную основу проекта.
        </div>

        <div>
          <strong>4) Рабочая документация</strong><br>
          Готовим комплект чертежей и спецификаций для реализации. 
          Передаём стройке понятный и структурированный пакет.
        </div>

        <div>
          <strong>5) Реализация и сопровождение</strong><br>
          Комплектация, коммуникация с подрядчиками и авторский надзор 
          (при выборе соответствующего формата работы).
        </div>

      </div>
    </div>
  </div>
</section>

<section class="section" id="partners">
  <div class="container">
    <h2 class="section-title">Партнёры</h2>
    <p class="section-sub">Заглушка. Потом сделаем интерактивную “комнату”.</p>
    <div class="panel">Плейсхолдер секции партнёров</div>
  </div>
</section>

<section class="section" id="team">
  <div class="container">
    <h2 class="section-title">Команда</h2>
    <p class="section-sub">Заглушка.</p>
    <div class="panel">Плейсхолдер команды</div>
  </div>
</section>

<section class="section" id="geo">
  <div class="container">
    <h2 class="section-title">География</h2>
    <p class="section-sub">Заглушка.</p>
    <div class="panel">Плейсхолдер географии</div>
  </div>
</section>

<section class="section" id="reviews">
  <div class="container">
    <h2 class="section-title">Отзывы</h2>
    <p class="section-sub">Заглушка.</p>
    <div class="panel">Плейсхолдер отзывов</div>
  </div>
</section>

<section class="section" id="forms">
  <div class="container">
    <h2 class="section-title">Формы обратной связи</h2>
    <p class="section-sub">Пока без интеграций. Только UX-скелет.</p>

    <hr>

    <h3 class="section-title" style="font-size:18px; margin-top:0;">Заказать консультацию</h3>
    <form class="form panel">
      <div class="field">
        <label>Имя</label>
        <input type="text" placeholder="Ваше имя">
      </div>
      <div class="field">
        <label>Контакт (телефон или email)</label>
        <input type="text" placeholder="+358… / email@">
      </div>
      <div class="field">
        <label>Сообщение</label>
        <textarea placeholder="Коротко опишите задачу"></textarea>
      </div>
      <button class="btn primary" type="button">Отправить</button>
    </form>

    <hr>

    <h3 class="section-title" style="font-size:18px; margin-top:0;">Заказать проект</h3>

    <form class="form panel" id="orderForm">

      <!-- Тип проекта -->
      <div class="field">
        <label>Тип объекта</label>
        <select required>
          <option value="">Выберите тип</option>
          <option>Квартира</option>
          <option>Дом</option>
          <option>Студия</option>
          <option>Коммерческое помещение</option>
        </select>
      </div>

      <div class="field">
        <label>Площадь (м²)</label>
        <input type="number" min="10" placeholder="Например, 78" required>
      </div>

      <div class="field">
        <label>Город</label>
        <input type="text" placeholder="Город реализации проекта" required>
      </div>

      <div class="field">
        <label>Формат работы</label>
        <select required>
          <option value="">Выберите формат</option>
          <option>Полный дизайн-проект</option>
          <option>Авторский надзор</option>
          <option>Дистанционный проект</option>
        </select>
      </div>

      <hr>

      <!-- Бюджет -->
      <div class="field">
        <label>Предполагаемый бюджет</label>
        <select required>
          <option value="">Выберите диапазон</option>
          <option>До 1 млн ₽</option>
          <option>1–3 млн ₽</option>
          <option>3–5 млн ₽</option>
          <option>5+ млн ₽</option>
          <option>Нужна консультация</option>
        </select>
      </div>

      <!-- Сроки -->
      <div class="field">
        <label>Планируемые сроки реализации</label>
        <select required>
          <option value="">Выберите срок</option>
          <option>Срочно (до 3 месяцев)</option>
          <option>3–6 месяцев</option>
          <option>6–12 месяцев</option>
          <option>Без жёстких ограничений</option>
        </select>
      </div>

      <hr>

      <!-- Контакт -->
      <div class="field">
        <label>Имя</label>
        <input type="text" placeholder="Ваше имя" required>
      </div>

      <div class="field">
        <label>Телефон или Email</label>
        <input type="text" placeholder="+7 / email@" required>
      </div>

      <div class="field">
        <label>Дополнительные пожелания</label>
        <textarea placeholder="Опишите задачу, стиль, ориентиры..."></textarea>
      </div>

      <button class="btn primary" type="submit">Отправить заявку</button>
    </form>

    <hr>

    <h3 class="section-title" style="font-size:18px; margin-top:0;">Оставить отзыв</h3>
    <form class="form panel">
      <div class="field">
        <label>Имя</label>
        <input type="text" placeholder="Ваше имя">
      </div>
      <div class="field">
        <label>Отзыв</label>
        <textarea placeholder="Ваш отзыв"></textarea>
      </div>
      <button class="btn primary" type="button">Отправить</button>
    </form>

  </div>
</section>

<footer class="footer">
  <div class="container">
    © <span id="y"></span> ЗА РАМКИ
  </div>
</footer>

<script>
(() => {
  const $ = (s) => document.querySelector(s);
  $("#y").textContent = new Date().getFullYear();

  const grid = $("#projectsGrid");
  const filters = $("#tagFilters");
  const btnMore = $("#btnMore");

  let all = [];
  let activeTag = "";
  let limit = 9;

  const esc = (v) => (v ?? "").toString()
    .replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;")
    .replaceAll('"',"&quot;").replaceAll("'","&#039;");

  function uniqTags(items){
    const set = new Set();
    items.forEach(p => (p.tags || []).forEach(t => set.add(t)));
    return Array.from(set).sort((a,b) => a.localeCompare(b, "ru"));
  }

  function renderTags(){
    const tags = uniqTags(all);
    filters.innerHTML = "";

    const mk = (label, val) => {
      const b = document.createElement("button");
      b.type = "button";
      b.className = "tag" + (activeTag === val ? " active" : "");
      b.textContent = label;
      b.onclick = () => {
        activeTag = (activeTag === val) ? "" : val;
        limit = 9;
        renderTags();
        renderGrid();
      };
      return b;
    };

    filters.appendChild(mk("Все", ""));
    tags.forEach(t => filters.appendChild(mk(t, t)));
  }

  function card(p){
    const href = `project.html?id=${encodeURIComponent(p.slug)}`;
    const meta = `${p.city || ""} • ${p.type || ""}${p.areaM2 ? " • " + p.areaM2 + " м²" : ""}`;
    return `
      <a class="card" href="${href}">
        <div class="card-media" aria-hidden="true"></div>
        <div class="card-body">
          <div class="card-title">${esc(p.title || "Проект")}</div>
          <div class="meta"><span>${esc(meta)}</span></div>
        </div>
      </a>
    `;
  }

  function renderGrid(){
    let items = all.slice();
    if (activeTag){
      items = items.filter(p => (p.tags || []).includes(activeTag));
    }
    const visible = items.slice(0, limit);
    grid.innerHTML = visible.map(card).join("");
    btnMore.style.display = (items.length > limit) ? "inline-flex" : "none";
  }

  btnMore.onclick = () => { limit += 9; renderGrid(); };

  fetch("./data/projects.json", { cache: "no-store" })
    .then(r => r.json())
    .then(data => {
      all = Array.isArray(data) ? data : [];
      renderTags();
      renderGrid();
    })
    .catch(() => {
      filters.innerHTML = `<div class="panel">Не удалось загрузить data/projects.json</div>`;
    });
})();
</script>

</body>
</html>



